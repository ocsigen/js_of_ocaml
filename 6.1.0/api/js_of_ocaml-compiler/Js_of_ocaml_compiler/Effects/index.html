<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Effects (js_of_ocaml-compiler.Js_of_ocaml_compiler.Effects)</title><meta charset="utf-8"/><link rel="stylesheet" href="../../../odoc.support/odoc.css"/><meta name="generator" content="odoc 3.0.0"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../odoc.support/highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../../../index.html">Index</a> &#x00BB; <a href="../../index.html">js_of_ocaml-compiler</a> &#x00BB; <a href="../index.html">Js_of_ocaml_compiler</a> &#x00BB; Effects</nav><header class="odoc-preamble"><h1>Module <code><span>Js_of_ocaml_compiler.Effects</span></code></h1></header><div class="odoc-content"><div class="odoc-spec"><div class="spec type anchored" id="type-trampolined_calls"><a href="#type-trampolined_calls" class="anchor"></a><code><span><span class="keyword">type</span> trampolined_calls</span><span> = <span class="xref-unresolved">Js_of_ocaml_compiler</span>.Code.Var.Set.t</span></code></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-in_cps"><a href="#type-in_cps" class="anchor"></a><code><span><span class="keyword">type</span> in_cps</span><span> = <span class="xref-unresolved">Js_of_ocaml_compiler</span>.Code.Var.Set.t</span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-f"><a href="#val-f" class="anchor"></a><code><span><span class="keyword">val</span> f : 
  <span><span class="label">flow_info</span>:<a href="../Global_flow/index.html#type-info">Global_flow.info</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">live_vars</span>:<a href="../Deadcode/index.html#type-variable_uses">Deadcode.variable_uses</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../Code/index.html#type-program">Code.program</a> <span class="arrow">&#45;&gt;</span></span>
  <a href="../Code/index.html#type-program">Code.program</a> * <a href="#type-trampolined_calls">trampolined_calls</a> * <a href="#type-in_cps">in_cps</a></span></code></div><div class="spec-doc"><p>Perform a partial CPS transform in order to translate a program that uses effect handler primitives to a program with only function calls, preserving the semantics.</p><p>In addition, if double translation is enabled, some functions are defined in two versions (direct-style and CPS) and the generated program switches to CPS versions when entering the first effect handler, and back to direct style when exiting it. In addition to this dynamic behavior, the transform performs a static analysis to detect which functions do not need to be CPS-transformed. As a consequence, some functions become pairs of functions while others remain in a single version. This functions returns the set of call sites that require trampolining, as well as the set of call sites that require the callee to be a pair with a CPS component.</p></div></div></div></body></html>
